import express from 'express';
import fs from 'fs';
import { render } from './entry-server.js';

const server = express();

server.get('*', async (req, res) => {
  const appHtml = await render();
  const indexHtml = fs.readFileSync('../../client/public/index.html', 'utf-8');
  const finalHtml = indexHtml.replace('<!--ssr-outlet-->', appHtml);

  res.send(finalHtml);
});

server.listen(5175, () => {
  console.log('Server started at http://localhost:5157');
});
